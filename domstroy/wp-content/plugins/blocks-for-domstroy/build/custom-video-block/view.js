(()=>{if(document.querySelector(".wp-block-create-block-custom-video-block")){let u,d=!1;function e(e){e.querySelector(".controls").classList.add("started"),e.querySelector("video").play(),e.querySelector(".play-pause-button").focus()}function t(e){e.querySelector(".controls").classList.remove("hide-controls"),clearTimeout(u),u=setTimeout(()=>{e.querySelector(".controls").classList.add("hide-controls")},2500)}function o(e,t){e.querySelector("video").volume=t.value,r(e.querySelector(".volume-button__icon").children,t.value),t.setAttribute("data-value",t.value)}function r(e,t){for(let t of e)t.classList.contains("hidden")||t.classList.add("hidden");0==t&&e[0].classList.remove("hidden"),0<t&&t<=.33&&e[1].classList.remove("hidden"),.33<t&&t<=.66&&e[2].classList.remove("hidden"),.66<t&&t<=1&&e[3].classList.remove("hidden")}function c(e){const t=e.querySelector("video"),o=e.querySelector(".volume-button__bar");0==t.volume?o.value=o.getAttribute("data-value"):o.value=0,t.volume=o.value,l&&n(o),r(e.querySelector(".volume-button__icon").children,o.value)}function n(e){const t=e.value/e.max*100;e.style.background="linear-gradient(to right, #FFF "+t+"%, rgba(255, 255, 255, .5) "+t+"%)"}function l(){return!CSS.supports("selector(::-moz-range-progress)")}function i(e){const t=e.querySelector("video"),o=e.querySelector(".play-pause-button").children;t.paused?(t.play(),o[0].classList.add("hidden"),o[1].classList.remove("hidden")):(t.pause(),o[0].classList.remove("hidden"),o[1].classList.add("hidden"))}function s(e){const t=e.querySelector(".full-screen__button").children;document.fullscreenElement?(document.exitFullscreen(),t[0].classList.remove("hidden"),t[1].classList.add("hidden")):(e.requestFullscreen(),t[0].classList.add("hidden"),t[1].classList.remove("hidden"))}document.querySelectorAll(".wp-block-create-block-custom-video-block").forEach(r=>{if(r.querySelector(".clickable-area").addEventListener("click",()=>e(r)),r.querySelector(".volume-button__bar").addEventListener("input",e=>o(r,e.target)),r.querySelector(".volume-button__icon").addEventListener("click",()=>c(r)),r.querySelector(".play-pause-button").addEventListener("click",()=>i(r)),r.querySelector("video").addEventListener("timeupdate",()=>function(e){d||(d=!0,requestAnimationFrame(()=>{const t=e.querySelector("video"),o=t.currentTime/t.duration;e.querySelector(".video-timeline__progress").style.transform="scaleX("+o+")",d=!1}))}(r)),r.querySelector(".video-timeline").addEventListener("click",e=>function(e,t){const o=e.querySelector("video"),r=e.querySelector(".video-timeline");if(!o.duration||isNaN(o.duration))return;const c=r.getBoundingClientRect(),n=t.clientX-c.left;o.currentTime=n/c.width*o.duration}(r,e)),r.querySelector(".full-screen__button").addEventListener("click",()=>s(r)),r.querySelector("video").addEventListener("ended",()=>function(e){const t=e.querySelector(".clickable-area").children;t[0].classList.add("hidden"),t[1].classList.remove("hidden"),e.querySelector(".controls").classList.remove("started"),e.querySelector(".clickable-area").focus()}(r)),r.querySelector("video").addEventListener("play",()=>{t(r),r.addEventListener("mousemove",()=>t(r)),r.addEventListener("touchstart",()=>t(r))}),r.querySelector("video").addEventListener("pause",()=>{r.querySelector(".controls").classList.remove("hide-controls"),clearTimeout(u),r.removeEventListener("mousemove",()=>t(r)),r.removeEventListener("touchstart",()=>t(r))}),r.addEventListener("keydown",t=>function(t,r){const n=t.querySelector("video"),l=t.querySelector(".controls"),u=t.querySelector(".volume-button__bar");"Space"==r.code&&(r.preventDefault(),l.classList.contains("started")?i(t):e(t)),l.classList.contains("started")&&("KeyM"==r.code&&c(t),"KeyF"==r.code&&s(t),"ArrowLeft"==r.code&&(n.currentTime-=10),"ArrowRight"==r.code&&(n.currentTime+=10),"ArrowUp"==r.code&&(r.preventDefault(),u.value=+u.value+.1,o(t,u)),"ArrowDown"==r.code&&(r.preventDefault(),u.value=+u.value-.1,o(t,u)))}(r,t)),function(e){const t=e.querySelector("video");t.volume=e.querySelector(".volume-button__bar").value,screen.width<=768&&""!==t.getAttribute("data-mobile")?t.setAttribute("poster",t.getAttribute("data-mobile")):t.setAttribute("poster",t.getAttribute("data-desktop"))}(r),l){const e=r.querySelector(".volume-button__bar");n(e),e.addEventListener("input",()=>n(e))}})}})();